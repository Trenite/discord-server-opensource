<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8" />
	<meta content="width=device-width, initial-scale=1.0, maximum-scale=1, user-scalable=no" name="viewport" />
	<link rel="stylesheet" href="/assets/532.851cb2d13cc02f83611f.css"
		integrity="sha256-1LkSVR5eGa6uCofthj3YZoV1rMJy5S8srldNPikCyKk= sha512-oKljwIVXLAZpNqU0r3PSrFs1taqc59HfmPS5S+oO+KA4hraYTIq7Zss6dg7hJmGLAUiNpLC053YBWOBOLz6N6g==">
	<link rel="icon" href="/assets/ec2c34cadd4b5f4594415127380a85e6.ico" />
	<title>Discord Test Client</title>
	<link rel="stylesheet" href="/assets/fosscord.css" />
	<link id="logincss" rel="stylesheet" href="/assets/fosscord-login.css" />
	<link id="customcss" rel="stylesheet" href="/assets/user.css" />
	<!-- preload plugin marker -->
</head>

<body>
	<div id="app-mount"></div>
	<script nonce="MTI3LDIzMCwyMTMsMTY2LDExNiwxMzMsMjAxLDU5">
		window.__OVERLAY__ = /overlay/.test(location.pathname)
	</script>
	<script nonce="MTI3LDIzMCwyMTMsMTY2LDExNiwxMzMsMjAxLDU5">
		window.__BILLING_STANDALONE__ = /^\/billing/.test(location.pathname)
	</script>
	<script nonce="MTI3LDIzMCwyMTMsMTY2LDExNiwxMzMsMjAxLDU5">
		window.GLOBAL_ENV = {
			API_ENDPOINT: '/api',
			API_VERSION: 9,
			GATEWAY_ENDPOINT: `${location.protocol === "https:" ? "wss://" : "ws://"}${location.hostname}:3002`,
			WEBAPP_ENDPOINT: "",
			CDN_HOST: `${location.hostname}:3003`,
			ASSET_ENDPOINT: "",
			MEDIA_PROXY_ENDPOINT: '//media.discordapp.net',
			WIDGET_ENDPOINT: `//${location.host}/widget`,
			INVITE_HOST: `${location.host}/invite`,
			GUILD_TEMPLATE_HOST: 'discord.new',
			GIFT_CODE_HOST: 'discord.gift',
			RELEASE_CHANNEL: 'stable',
			MARKETING_ENDPOINT: '//discord.com',
			BRAINTREE_KEY: 'production_5st77rrc_49pp2rp4phym7387',
			STRIPE_KEY: 'pk_live_CUQtlpQUF0vufWpnpUmQvcdi',
			NETWORKING_ENDPOINT: '//router.discordapp.net',
			RTC_LATENCY_ENDPOINT: '//latency.discord.media/rtc',
			ACTIVITY_APPLICATION_HOST: 'discordsays.com',
			PROJECT_ENV: 'production',
			REMOTE_AUTH_ENDPOINT: "//localhost:3020",
			SENTRY_TAGS: {
				"buildId": "917472c1ab209b84a9dfa9e6491a74ced6639958",
				"buildType": "normal"
			},
			MIGRATION_SOURCE_ORIGIN: 'https://discordapp.com',
			MIGRATION_DESTINATION_ORIGIN: 'https://discord.com',
			HTML_TIMESTAMP: Date.now(),
			ALGOLIA_KEY: 'aca0d7082e4e63af5ba5917d5e96bed0',
		};
		GLOBAL_ENV.MEDIA_PROXY_ENDPOINT = location.protocol + "//" + GLOBAL_ENV.CDN_HOST;
		const localStorage = window.localStorage;
		// TODO: remote auth
		// window.GLOBAL_ENV.REMOTE_AUTH_ENDPOINT = window.GLOBAL_ENV.GATEWAY_ENDPOINT.replace(/wss?:/, "");
		localStorage.setItem("gatewayURL", window.GLOBAL_ENV.GATEWAY_ENDPOINT);
		localStorage.setItem(
			"DeveloperOptionsStore",
			`{"trace":false,"canary":false,"logGatewayEvents":true,"logOverlayEvents":true,"logAnalyticsEvents":true,"sourceMapsEnabled":false,"axeEnabled":false}`
		);

		setInterval(() => {
			var token = JSON.parse(localStorage.getItem("token"));
			if (token) {
				document.querySelector("#logincss").remove();
			}
		}, 1000);

		const settings = JSON.parse(localStorage.getItem("UserSettingsStore"));
		if (settings && settings.locale.length <= 2) {
			// fix client locale wrong and client not loading at all
			settings.locale = "en-US";
			localStorage.setItem("UserSettingsStore", JSON.stringify(settings));
		}
	</script>
	<script nonce="MTI3LDIzMCwyMTMsMTY2LDExNiwxMzMsMjAxLDU5">
		! function () {
			if (null != window.WebSocket) {
				if (function (n) {
						try {
							var e = localStorage.getItem(n);
							return null == e ? null : JSON.parse(e)
						} catch (n) {
							return null
						}
					}("token") && !window.__OVERLAY__) {
					var n = null != window.DiscordNative || null != window.require ? "etf" : "json",
						e = window.GLOBAL_ENV.GATEWAY_ENDPOINT + "/?encoding=" + n + "&v=" + window.GLOBAL_ENV.API_VERSION +
						"&compress=zlib-stream";
					console.log("[FAST CONNECT] connecting to: " + e);
					var o = new WebSocket(e);
					o.binaryType = "arraybuffer";
					var t = Date.now(),
						i = {
							open: !1,
							identify: !1,
							gateway: e,
							messages: []
						};
					o.onopen = function () {
						console.log("[FAST CONNECT] connected in " + (Date.now() - t) + "ms"), i.open = !0
					}, o.onclose = o.onerror = function () {
						window._ws = null
					}, o.onmessage = function (n) {
						i.messages.push(n)
					}, window._ws = {
						ws: o,
						state: i
					}
				}
			}
		}();
	</script>
	<script src="/assets/checkLocale.js"></script>
	<script src="/assets/a317c7b9f7789fc90abc.js"></script>
	<script src="/assets/45a32e9e7f52916866e9.js"></script>
	<script src="/assets/47b6a212c3aead9d0312.js"></script>
	<script src="/assets/9b41ff7861c7878b14bb.js"></script>
	<!-- plugin marker -->
</body>

</html>