<!DOCTYPE html>
<html>
  <head>    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1, user-scalable=no" name="viewport" />

    <title>LoliSho.Chat</title>
    <link rel="stylesheet" href="/assets/fosscord.css" />
    <link id="logincss" rel="stylesheet" href="/assets/fosscord-login.css" />
    <link id="customcss" rel="stylesheet" href="/assets/user.css" />
    <!-- section:seometa -->
    <meta property="og:type" content="website" />
    <meta property="og:site_name" content="Lolisho.Chat" />
    <meta property="og:title" content="Lolisho.Chat - A way to chat without the limitations of Discord" />
    <meta property="og:description" content="LoliSho.Chat, you can chat about anything here, rules are the same as Pomf.TV." />
    <meta property="og:image" content="//lolisho.chat/assets/favicon.svg" />    
    <meta name="twitter:card" content="summary_large_image" />
		<script>
			window.__OVERLAY__ = /overlay/.test(location.pathname);
			window.__BILLING_STANDALONE__ = /^\/billing/.test(location.pathname);
			window.GLOBAL_ENV = {
				API_ENDPOINT: "/api",
				API_VERSION: 9,
				GATEWAY_ENDPOINT: `${location.protocol === "https:" ? "wss://" : "ws://"}${location.hostname}:3002`,
				WEBAPP_ENDPOINT: "",
				CDN_HOST: `${location.hostname}:3003`,
				ASSET_ENDPOINT: "",
				MEDIA_PROXY_ENDPOINT: "https://media.discordapp.net",
				WIDGET_ENDPOINT: `//${location.host}/widget`,
				INVITE_HOST: `${location.host}/invite`,
				GUILD_TEMPLATE_HOST: "discord.new",
				GIFT_CODE_HOST: "discord.gift",
				RELEASE_CHANNEL: "stable",
				MARKETING_ENDPOINT: "//discord.com",
				BRAINTREE_KEY: "production_5st77rrc_49pp2rp4phym7387",
				STRIPE_KEY: "pk_live_CUQtlpQUF0vufWpnpUmQvcdi",
				NETWORKING_ENDPOINT: "//router.discordapp.net",
				RTC_LATENCY_ENDPOINT: "//latency.discord.media/rtc",
				PROJECT_ENV: "production",
				REMOTE_AUTH_ENDPOINT: "//localhost:3020",
				SENTRY_TAGS: { buildId: "75e36d9", buildType: "normal" },
				MIGRATION_SOURCE_ORIGIN: "https://discordapp.com",
				MIGRATION_DESTINATION_ORIGIN: "https://discord.com",
				HTML_TIMESTAMP: Date.now(),
				ALGOLIA_KEY: "aca0d7082e4e63af5ba5917d5e96bed0"
      };
    GLOBAL_ENV.MEDIA_PROXY_ENDPOINT = location.protocol + "//" + GLOBAL_ENV.CDN_HOST;
    const localStorage = window.localStorage;
    // TODO: remote auth
    // window.GLOBAL_ENV.REMOTE_AUTH_ENDPOINT = window.GLOBAL_ENV.GATEWAY_ENDPOINT.replace(/wss?:/, "");
    localStorage.setItem("gatewayURL", window.GLOBAL_ENV.GATEWAY_ENDPOINT);
    localStorage.setItem("DeveloperOptionsStore",`{"trace":false,"canary":false,"logGatewayEvents":true,"logOverlayEvents":true,"logAnalyticsEvents":true,"sourceMapsEnabled":false,"axeEnabled":false}`);
      </script>
        <script nonce="MTc4LDE2MiwyNDMsMTU3LDE3MywxMCwyMjQsMTM1">
        !(function () {
            if (null != window.WebSocket) {
                if (
                    (function (n) {
                        try {
                            var e = localStorage.getItem(n);
                            return null == e ? null : JSON.parse(e);
                        } catch (n) {
                            return null;
                        }
                    })("token") &&
                    !window.__OVERLAY__
                ) {
                    var n = null != window.DiscordNative || null != window.require ? "etf" : "json",
                        e = window.GLOBAL_ENV.GATEWAY_ENDPOINT + "/?encoding=" + n + "&v=" + window.GLOBAL_ENV.API_VERSION + "&compress=zlib-stream";
                    console.log("[FAST CONNECT] connecting to: " + e);
                    var o = new WebSocket(e);
                    o.binaryType = "arraybuffer";
                    var t = Date.now(),
                        i = { open: !1, identify: !1, gateway: e, messages: [] };
                    (o.onopen = function () {
                        console.log("[FAST CONNECT] connected in " + (Date.now() - t) + "ms"), (i.open = !0);
                    }),
                        (o.onclose = o.onerror = function () {
                            window._ws = null;
                        }),
                        (o.onmessage = function (n) {
                            i.messages.push(n);
                        }),
                        (window._ws = { ws: o, state: i });
                }
            }
			setInterval(() => {
				var token = JSON.parse(localStorage.getItem("token"));
				if (token) {
					var logincss = document.querySelector('#logincss'),
					canRemove = logincss ? logincss: "";
					if(canRemove !== "") {
					document.querySelector("#logincss").remove();
					canRemove = "";
					}
				}
			}, 1000)

			const settings = JSON.parse(localStorage.getItem("UserSettingsStore"));
			if (settings && settings.locale.length <= 2) {
				// fix client locale wrong and client not loading at all
				settings.locale = "en-US";
				localStorage.setItem("UserSettingsStore", JSON.stringify(settings));
			}
        })();
        </script>
        <link rel="apple-touch-icon" sizes="180x180" href="/assets/apple-touch-icon.png">
        <link rel="icon" type="image/png" sizes="32x32" href="/assets/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/assets/favicon-16x16.png">
        <link rel="manifest" href="/assets/site.webmanifest">
        <link rel="mask-icon" href="/assets/safari-pinned-tab.svg" color="#5bbad5">
        <meta name="msapplication-TileColor" content="#da532c">
        <meta name="theme-color" content="#ffffff">


        <!-- endsection -->
    </head>
    <body>
        <div id="app-mount"></div>
	 	<script src="/assets/checkLocale.js"></script>
		<script src="/assets/1e18f2aac02e172db283.js"></script>
		<script src="/assets/681e53cdfefa5b82249a.js"></script>
		<script src="/assets/7a036838c0a0e73f59d8.js"></script>
		<script src="/assets/b6cf2184a7a05e7525ce.js"></script>
    </body>
</html>
