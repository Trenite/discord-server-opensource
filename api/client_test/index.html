<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Discord Test Client</title>
		<link rel="stylesheet" href="/assets/fosscord.css" />
		<!-- inline plugin marker -->
		<!-- preload plugin marker -->
	</head>

	<body>
		<div id="app-mount"></div>
		<script>
			window.__OVERLAY__ = /overlay/.test(location.pathname);
			window.__BILLING_STANDALONE__ = /^\/billing/.test(location.pathname);
FOSSCORD_HOST = location.hostname+":"+location.port;
if (location.protocol == "http:" && location.port == "80") { 
delete FOSSCORD_HOST; 
FOSSCORD_HOST = location.hostname; 
}
if (location.protocol === "https:" && location.port === "443") { 
delete FOSSCORD_HOST; 
FOSSCORD_HOST = location.hostname; 
}
window.GLOBAL_ENV = {
API_ENDPOINT: "//"+FOSSCORD_HOST+"/api",
API_VERSION: 9,
GATEWAY_ENDPOINT: `${location.protocol === "https:" ? "wss://" : "ws://"}`+FOSSCORD_HOST,
WEBAPP_ENDPOINT: "//"+FOSSCORD_HOST+"/app",
CDN_HOST: FOSSCORD_HOST,
ASSET_ENDPOINT: "//"+FOSSCORD_HOST,
MEDIA_PROXY_ENDPOINT: "//"+FOSSCORD_HOST+"/media",
WIDGET_ENDPOINT: "//"+FOSSCORD_HOST+"/widget",
INVITE_HOST: FOSSCORD_HOST+"/invite",
GUILD_TEMPLATE_HOST: FOSSCORD_HOST+"/new",
GIFT_CODE_HOST: FOSSCORD_HOST+"/gift",
RELEASE_CHANNEL: "",
MARKETING_ENDPOINT: "//"+FOSSCORD_HOST,
BRAINTREE_KEY: "",
STRIPE_KEY: "",
NETWORKING_ENDPOINT: "//"+FOSSCORD_HOST+"/router",
RTC_LATENCY_ENDPOINT: "//"+FOSSCORD_HOST+"/rtc",
ACTIVITY_APPLICATION_HOST: FOSSCORD_HOST+"/says",
PROJECT_ENV: "",
REMOTE_AUTH_ENDPOINT: "//"+FOSSCORD_HOST+"/rag",
SENTRY_TAGS: {"buildId":"","buildType":""},
MIGRATION_SOURCE_ORIGIN: location.protocol+"//"+FOSSCORD_HOST,
MIGRATION_DESTINATION_ORIGIN: location.protocol+"//"+FOSSCORD_HOST,
HTML_TIMESTAMP: Date.now(),
ALGOLIA_KEY: "",
};
			const localStorage = window.localStorage;
			localStorage.setItem("gatewayURL", window.GLOBAL_ENV.GATEWAY_ENDPOINT);
			localStorage.setItem(
				"DeveloperOptionsStore",
				`{"trace":false,"canary":false,"logGatewayEvents":true,"logOverlayEvents":true,"logAnalyticsEvents":true,"sourceMapsEnabled":false,"axeEnabled":false}`
			);

			setInterval(() => {
				let token = JSON.parse(localStorage.getItem("token"));
				if (token) {
					let logincss = document.querySelector('#logincss'),
					canRemove = logincss ? logincss: "";
					if(canRemove !== "") {
					document.querySelector("#logincss").remove();
					canRemove = "";
					}
				}
			}, 1000)

			const settings = JSON.parse(localStorage.getItem("UserSettingsStore"));
			if (settings && settings.locale.length <= 2) {
				// fix client locale wrong and client not loading at all
				settings.locale = "en-US";
				localStorage.setItem("UserSettingsStore", JSON.stringify(settings));
			}
		</script>
	 	<script src="/assets/checkLocale.js"></script>
		<script src="/assets/1e18f2aac02e172db283.js"></script>
		<script src="/assets/681e53cdfefa5b82249a.js"></script>
		<script src="/assets/7a036838c0a0e73f59d8.js"></script>
		<script src="/assets/b6cf2184a7a05e7525ce.js"></script>
		<!-- plugin marker -->
	</body>
</html>
